
langcode: en
status: true
dependencies: {}
id: events
class: null
field_plugin_method: null
migration_tags: csv
migration_group: academy
label: 'Migrating events from CSV file'

source:
  plugin: csv
  path: 'public://migrations/academy-events.csv'
  delimiter: ','
  enclosure: '"'
  header_row_count: 1
  keys:
    - nid
  column_names: 
    -
      nid: id
    -
      title: title
    -
      body: body
    -
      event_type: event_type
    -
      event_series: event_series
    -
      event_date_start: event_date_start
    -
      event_date_end: event_date_end  

process:
  type:
    plugin: default_value
    default_value: events
  uid:
    plugin: default_value
    default_value: 3
  title: title
  'body/format':
    plugin: default_value
    default_value: basic_html
  'body/value': body
  field_events_legacy_id: nid
  field_events_event_type:
    source: event_type
    plugin: entity_generate
    entity_type: taxonomy_term
    bundle_key: vid
    bundle: event_types
    value_key: name
    ignore_case: true
  field_events_event_series:
    source: event_series
    plugin: entity_generate
    entity_type: taxonomy_term
    bundle_key: vid
    bundle: event_series
    value_key: name
    ignore_case: true
  field_events_event_dates/value:
    plugin: format_date
    source: event_date_start
    from_format: 'm-d-Y\TH:i'
    to_format: 'm-j-Y\TH:i'
    from_timezone: PST
    to_timezone: PST
  field_events_event_dates/end_value:
    plugin: format_date
    source: event_date_end
    source: end_value
    from_format: 'm-d-Y\TH:i'
    to_format: 'm-j-Y\TH:i'
    from_timezone: PST
    to_timezone: PST

destination: 
  plugin: entity:node

migration_dependencies: null